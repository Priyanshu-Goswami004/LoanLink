<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supply Chain Tracking System</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <h1>üì¶ Supply Chain Tracker</h1>
                <p>Transparent ‚Ä¢ Secure ‚Ä¢ Traceable</p>
            </div>
            <div class="wallet-section">
                <button id="connectWallet" class="btn btn-primary">Connect Wallet</button>
                <div id="walletInfo" class="wallet-info hidden">
                    <span id="walletAddress"></span>
                    <div id="connectionStatus" class="status-indicator"></div>
                </div>
            </div>
        </div>
    </header>

    <nav class="nav-tabs">
        <div class="container">
            <button class="tab-btn active" data-tab="add-product">Add Product</button>
            <button class="tab-btn" data-tab="update-status">Update Status</button>
            <button class="tab-btn" data-tab="verify-product">Verify Product</button>
            <button class="tab-btn" data-tab="admin-panel">Admin</button>
        </div>
    </nav>

    <main class="container">
        <!-- Add Product Tab -->
        <section id="add-product" class="tab-content active">
            <div class="card">
                <h2>üè≠ Add New Product</h2>
                <p class="card-description">Register a new product in the supply chain system</p>
                <form id="addProductForm">
                    <div class="form-group">
                        <label for="productName">Product Name:</label>
                        <input type="text" id="productName" required placeholder="e.g., Premium Coffee Beans">
                    </div>
                    <div class="form-group">
                        <label for="productDescription">Description:</label>
                        <textarea id="productDescription" required placeholder="Detailed product description..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="manufacturingLocation">Manufacturing Location:</label>
                        <input type="text" id="manufacturingLocation" required placeholder="e.g., Factory A, Mumbai, India">
                    </div>
                    <div class="form-group">
                        <label for="productPrice">Price (in Wei):</label>
                        <input type="number" id="productPrice" required placeholder="1000000000000000000" min="1">
                    </div>
                    <button type="submit" class="btn btn-success">Add Product</button>
                </form>
            </div>
        </section>

        <!-- Update Status Tab -->
        <section id="update-status" class="tab-content">
            <div class="card">
                <h2>üöö Update Product Status</h2>
                <p class="card-description">Update the location and status of products in transit</p>
                <form id="updateStatusForm">
                    <div class="form-group">
                        <label for="statusProductId">Product ID:</label>
                        <input type="number" id="statusProductId" required min="1" placeholder="e.g., 1">
                    </div>
                    <div class="form-group">
                        <label for="newStatus">New Status:</label>
                        <select id="newStatus" required>
                            <option value="">Select Status</option>
                            <option value="0">Manufactured</option>
                            <option value="1">In Transit</option>
                            <option value="2">Delivered</option>
                            <option value="3">Sold</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="currentLocation">Current Location:</label>
                        <input type="text" id="currentLocation" required placeholder="e.g., Warehouse B, Delhi">
                    </div>
                    <div class="form-group">
                        <label for="updateNotes">Notes:</label>
                        <textarea id="updateNotes" placeholder="Additional information about this update..."></textarea>
                    </div>
                    <button type="submit" class="btn btn-warning">Update Status</button>
                </form>
            </div>
        </section>

        <!-- Verify Product Tab -->
        <section id="verify-product" class="tab-content">
            <div class="card">
                <h2>üîç Verify Product Authenticity</h2>
                <p class="card-description">Check product authenticity and view complete tracking history</p>
                <div class="form-group">
                    <label for="verifyProductId">Product ID:</label>
                    <div class="input-group">
                        <input type="number" id="verifyProductId" min="1" placeholder="Enter Product ID">
                        <button id="verifyBtn" class="btn btn-info">Verify</button>
                    </div>
                </div>
                
                <div id="productInfo" class="product-info hidden">
                    <div class="authenticity-status">
                        <div id="authenticityBadge" class="authenticity-badge">
                            <span id="authenticityText">Authentic</span>
                            <div id="authenticityIcon">‚úì</div>
                        </div>
                    </div>
                    
                    <div class="product-details">
                        <h3 id="productInfoName"></h3>
                        <p id="productInfoDescription"></p>
                        
                        <div class="detail-grid">
                            <div class="detail-item">
                                <strong>Manufacturer:</strong>
                                <span id="productManufacturer"></span>
                            </div>
                            <div class="detail-item">
                                <strong>Manufacturing Date:</strong>
                                <span id="manufacturingDate"></span>
                            </div>
                            <div class="detail-item">
                                <strong>Current Status:</strong>
                                <span id="currentStatus" class="status-badge"></span>
                            </div>
                            <div class="detail-item">
                                <strong>Current Location:</strong>
                                <span id="productCurrentLocation"></span>
                            </div>
                            <div class="detail-item">
                                <strong>Price:</strong>
                                <span id="productInfoPrice"></span>
                            </div>
                            <div class="detail-item">
                                <strong>Current Owner:</strong>
                                <span id="currentOwner"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tracking-history">
                        <h4>üìã Tracking History</h4>
                        <button id="loadHistoryBtn" class="btn btn-secondary">Load Complete History</button>
                        <div id="historyContainer" class="history-container"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Panel Tab -->
        <section id="admin-panel" class="tab-content">
            <div id="adminSection" class="card admin-card">
                <h2>üëë Administrator Panel</h2>
                <p class="card-description">Manage system access and user permissions</p>
                
                <div class="admin-controls">
                    <div class="admin-section">
                        <h3>Authorize Manufacturer</h3>
                        <div class="form-group">
                            <label for="manufacturerAddress">Manufacturer Address:</label>
                            <div class="input-group">
                                <input type="text" id="manufacturerAddress" placeholder="0x...">
                                <button id="authorizeManufacturer" class="btn btn-success">Authorize</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h3>Authorize Logistics Provider</h3>
                        <div class="form-group">
                            <label for="logisticsAddress">Logistics Provider Address:</label>
                            <div class="input-group">
                                <input type="text" id="logisticsAddress" placeholder="0x...">
                                <button id="authorizeLogistics" class="btn btn-warning">Authorize</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h3>Emergency Controls</h3>
                        <div class="form-group">
                            <label for="counterfeitProductId">Mark as Counterfeit:</label>
                            <div class="input-group">
                                <input type="number" id="counterfeitProductId" placeholder="Product ID" min="1">
                                <button id="markCounterfeit" class="btn btn-danger">Mark Counterfeit</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="nonAdminMessage" class="non-admin-message hidden">
                    <p>‚ö†Ô∏è Administrative functions are only available to the contract owner.</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Processing blockchain transaction...</p>
        </div>
    </div>

    <!-- Notification System -->
    <div id="notification" class="notification hidden">
        <div class="notification-content">
            <span id="notificationMessage"></span>
            <button id="closeNotification" class="close-btn">&times;</button>
        </div
